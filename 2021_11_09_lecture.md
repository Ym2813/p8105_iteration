Iteration and list columns
================
Anna Ma
11/13/2021

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──

    ## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
    ## ✓ tibble  3.1.5     ✓ dplyr   1.0.7
    ## ✓ tidyr   1.1.3     ✓ stringr 1.4.0
    ## ✓ readr   2.0.1     ✓ forcats 0.5.1

    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
set.seed(1)
```

## Define Function

``` r
mean_and_sd = function(x) {
  
  if (!is.numeric(x)) {
    stop("Argument x should be numeric")
  } else if (length(x) == 1) {
    stop("Cannot be computed for length 1 vectors")
  }
  
  mean_x = mean(x)
  sd_x = sd(x)

  output_df = 
    tibble(mean = mean_x, 
       sd = sd_x)
  # or use list(mean = mean_x, sd = sd_x)
  return(output_df)
}
```

## Lists

``` r
l = 
  list(
    vec_numeric = 5:8,
    vec_logical = c(TRUE, FALSE),
    summary = summary(rnorm(1000, mean = 5, sd = 3))
)

# 3 ways to access the third element of this list:

l[[3]]
```

    ##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    ##  -4.024   2.908   4.894   4.965   7.065  16.431

``` r
l[["summary"]]
```

    ##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    ##  -4.024   2.908   4.894   4.965   7.065  16.431

``` r
l$summary
```

    ##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    ##  -4.024   2.908   4.894   4.965   7.065  16.431

## List of normals

``` r
list_norms = 
  list(
    a = rnorm(50, mean = 2, sd = 1),
    b = rnorm(50, mean = 5, sd = 3),
    c = rnorm(50, mean = 20, sd = 1.2),
    d = rnorm(50, mean = -12, sd = 0.5)
  )
```

## Use function on list

``` r
#This uses the element sequence.
mean_and_sd(list_norms[[1]])
```

    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  1.98 0.967

``` r
# or mean_and_sd(list_norms[["a"]]) this use name
```

## For loop

lets use a for loop to iterate over the list of normals.

Steps to do it: 1. Identify the input. In this case, the input is the
list of normals 2. Figure out the output. We want a vector that is a
list and have 4 open spots. 3. Know the function that we want to apply
to the input 4. Use function on the input list and put the result into
the output list

Now, we can use a for loop to iterate what we did on a single element to
create a complete list for all the elements in the list.

``` r
for (i in 1:4) {
  output[[i]] = mean_and_sd(list_norms[[i]])
}

output
```

    ## [[1]]
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  1.98 0.967
    ## 
    ## [[2]]
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  5.01  3.30
    ## 
    ## [[3]]
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  19.8  1.09
    ## 
    ## [[4]]
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1 -12.1 0.533

Lets use map instead

``` r
#map input on to the function and return output for all 
output_map = map(list_norms, mean_and_sd)

output_map
```

    ## $a
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  1.98 0.967
    ## 
    ## $b
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  5.01  3.30
    ## 
    ## $c
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  19.8  1.09
    ## 
    ## $d
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1 -12.1 0.533

``` r
# same result with for loop

# we can also do 
map(list_norms, median)
```

    ## $a
    ## [1] 2.108485
    ## 
    ## $b
    ## [1] 5.02159
    ## 
    ## $c
    ## [1] 19.6168
    ## 
    ## $d
    ## [1] -12.1248

``` r
map(list_norms, summary)
```

    ## $a
    ##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    ## 0.08765 1.14952 2.10848 1.97682 2.76028 4.03610 
    ## 
    ## $b
    ##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    ##  -1.964   2.805   5.022   5.008   7.271  12.204 
    ## 
    ## $c
    ##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    ##   17.03   18.98   19.62   19.77   20.61   21.85 
    ## 
    ## $d
    ##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    ##  -13.61  -12.32  -12.12  -12.06  -11.65  -10.91

``` r
map(list_norms, IQR)
```

    ## $a
    ## [1] 1.610758
    ## 
    ## $b
    ## [1] 4.465936
    ## 
    ## $c
    ## [1] 1.634212
    ## 
    ## $d
    ## [1] 0.6664827

If we want to access element in the list, use:

``` r
output[[1]]
```

    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  1.98 0.967

If we know the type of data that the output will be, we can do this an
dget a simpler output.

``` r
map_dbl(list_norms, median)
```

    ##          a          b          c          d 
    ##   2.108485   5.021590  19.616801 -12.124795

## List Columns!!
